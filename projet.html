<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Projet final ‚Äî Cours S√©curit√© PHP & MySQL</title>
  <link rel="stylesheet" href="assets/style.css" />
  <script defer src="assets/site.js"></script>
</head>
<body>
  <a href="#contenu" class="skip-link">Aller au contenu</a>
  <header class="site-header" role="banner">
    <div class="container navbar">
      <a class="brand" href="index.html" aria-label="Accueil">
        <span class="logo">SP</span>
        <span>S√©curit√© PHP & MySQL</span>
      </a>
      <button class="nav-toggle" aria-controls="primary-nav" aria-expanded="false" aria-label="Ouvrir le menu">
        <span class="bar"></span><span aria-hidden="true">Menu</span>
      </button>
      <nav id="primary-nav" class="nav" aria-label="Navigation principale">
        <ul>
          <li><a href="index.html">Introduction</a></li>
          <li><a href="php-poo.html">PHP POO</a></li>
          <li><a href="mysql.html">MySQL & PDO</a></li>
          <li><a href="vulnerabilites.html">Vuln√©rabilit√©s</a></li>
          <li><a href="securisation.html">S√©curisation</a></li>
          <li><a href="modules.html">Modules & Outils</a></li>
          <li><a href="projet.html">Projet final</a></li>
          <li><a href="exercices.html">Exercices</a></li>
        </ul>
      </nav>
    </div>
  </header>

  <main id="contenu" class="container">

    <!-- HERO -->
    <section class="hero card">
      <h1>üß™ Projet final : Mini blog s√©curis√©</h1>
      <p>
        Cr√©e un mini blog avec authentification. L‚Äôobjectif : comprendre les failles classiques, les d√©tecter et les corriger.
      </p>
    </section>

    <!-- 1. Introduction -->
    <section class="card">
      <h2>1) Introduction</h2>
      <p>
        Objectif : mettre en pratique la POO, MySQL & PDO, et s√©curiser une application simple.  
        P√©rim√®tre :
        <ul>
          <li>Cr√©ation et gestion d‚Äôutilisateurs (authentification)</li>
          <li>Cr√©ation, lecture, modification et suppression d‚Äôarticles (CRUD)</li>
          <li>Commentaires avec pr√©vention des injections et XSS</li>
        </ul>
        Crit√®res d‚Äô√©valuation : s√©curit√© des mots de passe, protection contre injections SQL/XSS, gestion des r√¥les.
      </p>
    </section>

    <!-- 2. Exemple vuln√©rable -->
    <section class="card">
      <h2>2) Exemple sans protection</h2>
      <div class="example">
        <p>
          Dans cette version :
        </p>
        <ul>
          <li>Mots de passe stock√©s en clair</li>
          <li>CRUD sans contr√¥le des permissions</li>
          <li>Commentaires affich√©s sans √©chappement ‚Üí vuln√©rable XSS</li>
          <li>Formulaires sans CSRF token</li>
        </ul>
        <pre><code class="php">
// login_vuln.php
$username = $_POST['username'];
$password = $_POST['password'];
$sql = "SELECT * FROM users WHERE username='$username' AND password='$password'";
$user = $pdo->query($sql)->fetch();

// commentaires
echo $_POST['comment'];
        </code></pre>
        <p>‚ö†Ô∏è Test : un utilisateur peut injecter du code HTML ou JavaScript dans les commentaires, ou se connecter sans mot de passe si injection SQL.</p>
      </div>
    </section>

    <!-- 3. Exemple s√©curis√© -->
    <section class="card">
      <h2>3) Exemple avec protection</h2>
      <div class="secure">
        <p>Dans la version s√©curis√©e :</p>
        <ul>
          <li>Authentification avec <code>password_hash</code> et <code>password_verify</code></li>
          <li>R√¥les et permissions pour acc√©der aux actions (CRUD)</li>
          <li>√âchappement syst√©matique des contenus affich√©s (<code>htmlspecialchars</code>)</li>
          <li>CSRF tokens sur les formulaires sensibles</li>
          <li>Requ√™tes pr√©par√©es pour toutes les interactions avec la base</li>
        </ul>
        <pre><code class="php">
// login_secure.php
$stmt = $pdo->prepare("SELECT username, password FROM users WHERE username=:u");
$stmt->execute([':u'=>$username]);
$user = $stmt->fetch();
if($user && password_verify($password, $user['password'])) {
    $_SESSION['user'] = $user['username'];
}

// affichage s√©curis√© d'un commentaire
echo htmlspecialchars($comment);
        </code></pre>
        <p>üí° R√©sultat : impossible de se connecter sans mot de passe, injection SQL et XSS bloqu√©es, formulaire CSRF prot√©g√©.</p>
      </div>
    </section>

    <!-- 4. Exercices pratiques -->
    <section class="card">
      <h2>4) Exercices pratiques</h2>
      <ul>
        <li>Ajouter un r√¥le ¬´ administrateur ¬ª et limiter l‚Äôacc√®s √† certaines pages</li>
        <li>Tester les injections SQL et corriger avec PDO</li>
        <li>Tester XSS dans les commentaires et appliquer <code>htmlspecialchars</code></li>
        <li>Mettre en place un CSRF token pour le formulaire de cr√©ation d‚Äôarticle</li>
      </ul>
    </section>

    <!-- 5. R√©sum√© -->
    <section class="card">
      <h2>5) R√©sum√©</h2>
      <p>
        Ce projet final synth√©tise tout ce que tu as appris :  
        POO pour structurer le code, PDO pour communiquer avec la base, s√©curisation des mots de passe, pr√©vention des injections et XSS, gestion des r√¥les et CSRF.
      </p>
    </section>

  </main>

  <footer role="contentinfo">
    <div class="container">
      <p>¬© Projet final ¬∑ Cours p√©dagogique ‚Äî PHP POO ¬∑ MySQL ¬∑ S√©curit√© ¬∑ Accessibilit√©</p>
    </div>
  </footer>
</body>
</html>
